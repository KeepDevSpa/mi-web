"use client";

import React, { useState, useEffect } from 'react';
import Image from 'next/image';
import Link from 'next/link';
import { Button } from '@/components/ui/button';
import { Phone, CheckCircle } from 'lucide-react';
import dynamic from 'next/dynamic';
import { InformationCard } from '@/components/ui/information-card';
import { FAQAccordionSafe } from '@/components/ui/faq-accordion-safe';
import './empresa-styles.css';
import VodafoneVisuals from './vodafone-visuals';
import HeroProfesional from '@/components/ui/hero-profesional';

// Componente para los botones de servicio
const ServiceButton = ({ 
  isActive, 
  category, 
  serviceId, 
  name, 
  onClick 
}: { 
  isActive: boolean; 
  category: string; 
  serviceId: string; 
  name: string; 
  onClick: (category: string, serviceId: string) => void; 
}) => {
  return (
    <button 
      className={`text-sm md:text-base px-4 py-2 rounded-lg transition-colors duration-300 flex items-center gap-2 shadow-lg ${isActive 
        ? 'bg-gradient-to-br from-green-500 to-green-600 text-white font-semibold' 
        : 'bg-stone-100 text-stone-700 hover:bg-green-100'}`}
      onClick={() => onClick(category, serviceId)}
    >
      {name}
    </button>
  );
};

// Componente para el contenido del servicio
const ServiceContent = ({ service, ctaId }: { service: any, ctaId: string }) => {
  return (
    <div className="grid grid-cols-1 md:grid-cols-5 gap-8 items-start">
      <div className="md:col-span-3">
        <p className="text-lg font-semibold text-orange-600 mb-2">{service.need}</p>
        <h3 className="text-2xl font-bold mb-4">{service.name}</h3>
        <p className="text-stone-600 mb-6">{service.solution}</p>
        <h4 className="font-bold mb-2">CaracterÃ­sticas Principales:</h4>
        <ul className="space-y-2 text-stone-600 mb-6">
          {service.features.map((feature: string, idx: number) => (
            <li key={idx} className="flex items-start">
              <span className="text-green-500 mr-2 mt-1">â–ª</span>
              <span>{feature}</span>
            </li>
          ))}
        </ul>
        <a 
          href={`#${ctaId}`} 
          className="cta-button inline-block bg-green-600 text-white font-semibold px-6 py-2 rounded-lg text-sm shadow-md mt-4 hover:bg-green-700 transition-all duration-200 hover:translate-y-[-2px] hover:shadow-lg"
        >
          Me interesa esta soluciÃ³n
        </a>
      </div>
      <div className="md:col-span-2">
        <div className="relative w-full aspect-[3/2] rounded-xl overflow-hidden shadow-lg mb-6">
          <Image 
            src={service.imageUrl} 
            alt={service.name}
            fill
            className="object-cover"
          />
        </div>
        <div className="bg-green-50/50 border border-green-200 p-4 rounded-lg">
          <h4 className="font-bold mb-2">Ideal para:</h4>
          <p className="text-stone-700 text-sm">{service.ideal}</p>
        </div>
      </div>
    </div>
  );
};

// Componente para el grÃ¡fico de comparaciÃ³n (simplificado)
const ComparationChart = () => {
  return (
    <div className="mt-12">
      <h3 className="text-2xl font-bold text-center mb-6">Comparativa de Soluciones de Voz</h3>
      <div className="bg-gradient-to-r from-stone-50 to-stone-100 p-6 rounded-xl border border-stone-200 max-w-3xl mx-auto">
        <div className="grid grid-cols-1 md:grid-cols-3 gap-4 text-center">
          <div className="bg-white p-4 rounded-lg shadow">
            <h4 className="font-semibold text-green-600 mb-2">Centralita Virtual</h4>
            <div className="text-sm text-stone-600 space-y-1">
              <p>ğŸš€ <strong>Movilidad:</strong> 5/5</p>
              <p>ğŸ’° <strong>Baja InversiÃ³n:</strong> 5/5</p>
              <p>ğŸ”§ <strong>Flexibilidad:</strong> 5/5</p>
              <p className="text-green-600 font-medium mt-2">Ideal para empresas modernas</p>
            </div>
          </div>
          <div className="bg-white p-4 rounded-lg shadow">
            <h4 className="font-semibold text-blue-600 mb-2">Trunk SIP</h4>
            <div className="text-sm text-stone-600 space-y-1">
              <p>ğŸš€ <strong>Movilidad:</strong> 2/5</p>
              <p>ğŸ’° <strong>Baja InversiÃ³n:</strong> 4/5</p>
              <p>ğŸ”§ <strong>Flexibilidad:</strong> 1/5</p>
              <p className="text-blue-600 font-medium mt-2">Para centralitas existentes</p>
            </div>
          </div>
          <div className="bg-white p-4 rounded-lg shadow">
            <h4 className="font-semibold text-purple-600 mb-2">Teams</h4>
            <div className="text-sm text-stone-600 space-y-1">
              <p>ğŸš€ <strong>Movilidad:</strong> 5/5</p>
              <p>ğŸ’° <strong>Baja InversiÃ³n:</strong> 3/5</p>
              <p>ğŸ”§ <strong>Flexibilidad:</strong> 4/5</p>
              <p className="text-purple-600 font-medium mt-2">Perfecto para usuarios Teams</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
};

// Componente principal
export default function EmpresaPage() {
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState<string | null>(null);
  const [faqs, setFaqs] = useState<any[]>([]);
  const [heroConfig, setHeroConfig] = useState<any>(null);

  // Datos de servicios
  const servicesData = {
    conectividad: {
      title: "Conectividad: La Base de su Negocio Digital",
      description: "Una conexiÃ³n a internet fiable y de alto rendimiento es la base sobre la que se construye cualquier empresa moderna. Ofrecemos una gama completa de soluciones para garantizar que su negocio estÃ© siempre online.",
      services: [
                { id: 'ftto', name: 'Fibra Dedicada (FTTO)', imageUrl: '/fiber-optic-cable-to-house-xiaoliangge-stock.adobe_.com_.jpg', need: 'Â¿Su conexiÃ³n a internet es lenta o inestable y frena a su equipo?', solution: 'Le proporciona un canal exclusivo a internet. El ancho de banda es 100% garantizado y no se comparte, eliminando cuellos de botella y asegurando mÃ¡xima productividad.', features: ['Caudal 100% garantizado', 'MÃ¡xima fiabilidad (SLA)', 'Seguridad superior', 'Baja latencia'], ideal: 'Empresas con aplicaciones crÃ­ticas en la nube, voz sobre IP ...' },
        { id: 'ftth', name: 'Fibra Compartida (FTTH)', imageUrl: '/placeholder.jpg', need: 'Â¿Busca la mejor relaciÃ³n velocidad-precio para sus oficinas?', solution: 'Ofrece alta velocidad de conexiÃ³n a un coste competitivo. Disponemos de una amplia cobertura nacional para dar servicio a todas sus sedes.', features: ['Alta velocidad hasta 1 Gbps', 'Amplia cobertura nacional', 'Excelente relaciÃ³n rendimiento/precio'], ideal: 'Oficinas y sedes que requieren una conexiÃ³n rÃ¡pida para el trabajo diario.' },
        { id: 'satelital', name: 'Conectividad Satelital', imageUrl: '/5g-network.png', need: 'Â¿Su negocio estÃ¡ en una zona rural o sin acceso a fibra?', solution: 'Llevamos internet de alta velocidad y baja latencia a cualquier lugar, por remoto que sea, a travÃ©s de la red de satÃ©lites de Starlink.', features: ['Cobertura total del territorio', 'Baja latencia', 'Alta velocidad de descarga'], ideal: 'Negocios en zonas rurales, eventos remotos o como soluciÃ³n de backup definitiva.' },
        { id: '4g5g', name: '4G/5G y Radioenlace', imageUrl: '/5g-mtc.jpg', need: 'Â¿Necesita una conexiÃ³n rÃ¡pida de desplegar o una alternativa a la fibra?', solution: 'Ofrecemos conexiones inalÃ¡mbricas de alta capacidad para garantizar la conectividad donde la fibra no es una opciÃ³n.', features: ['Radioenlace dedicado PTP', 'Conectividad mÃ³vil 4G/5G', 'Despliegue inmediato', 'Backup de conectividad'], ideal: 'ConexiÃ³n principal en zonas sin fibra o como sistema de backup automÃ¡tico.' },
        { id: 'sdwan', name: 'SD-WAN: Red Inteligente', imageUrl: '/modern-office-collaboration.png', need: 'Â¿Gestiona mÃºltiples sedes y necesita optimizar el trÃ¡fico?', solution: 'Transforma su red tradicional en una red inteligente, flexible y segura, priorizando las aplicaciones crÃ­ticas para su negocio.', features: ['OptimizaciÃ³n de ancho de banda', 'GestiÃ³n centralizada', 'Mejora de la seguridad', 'PriorizaciÃ³n de aplicaciones'], ideal: 'Empresas con mÃºltiples delegaciones que utilizan aplicaciones en la nube.' },
        { id: 'ftth', name: 'Fibra Compartida (FTTH)', imageUrl: '/placeholder.jpg', need: 'Â¿Busca la mejor relaciÃ³n velocidad-precio para sus oficinas?', solution: 'Ofrece alta velocidad de conexiÃ³n a un coste competitivo. Disponemos de una amplia cobertura nacional para dar servicio a todas sus sedes.', features: ['Alta velocidad hasta 1 Gbps', 'Amplia cobertura nacional', 'Excelente relaciÃ³n rendimiento/precio'], ideal: 'Oficinas y sedes que requieren una conexiÃ³n rÃ¡pida para el trabajo diario.' },
        { id: 'satelital', name: 'Conectividad Satelital', imageUrl: '/placeholder.jpg', need: 'Â¿Su negocio estÃ¡ en una zona rural o sin acceso a fibra?', solution: 'Llevamos internet de alta velocidad y baja latencia a cualquier lugar, por remoto que sea, a travÃ©s de la red de satÃ©lites de Starlink.', features: ['Cobertura total del territorio', 'Baja latencia', 'Alta velocidad de descarga'], ideal: 'Negocios en zonas rurales, eventos remotos o como soluciÃ³n de backup definitiva.' },
        { id: '4g5g', name: '4G/5G y Radioenlace', imageUrl: '/placeholder.jpg', need: 'Â¿Necesita una conexiÃ³n rÃ¡pida de desplegar o una alternativa a la fibra?', solution: 'Ofrecemos conexiones inalÃ¡mbricas de alta capacidad para garantizar la conectividad donde la fibra no es una opciÃ³n.', features: ['Radioenlace dedicado PTP', 'Conectividad mÃ³vil 4G/5G', 'Despliegue inmediato', 'Backup de conectividad'], ideal: 'ConexiÃ³n principal en zonas sin fibra o como sistema de backup automÃ¡tico.' },
        { id: 'sdwan', name: 'SD-WAN: Red Inteligente', imageUrl: '/placeholder.jpg', need: 'Â¿Gestiona mÃºltiples sedes y necesita optimizar el trÃ¡fico?', solution: 'Transforma su red tradicional en una red inteligente, flexible y segura, priorizando las aplicaciones crÃ­ticas para su negocio.', features: ['OptimizaciÃ³n de ancho de banda', 'GestiÃ³n centralizada', 'Mejora de la seguridad', 'PriorizaciÃ³n de aplicaciones'], ideal: 'Empresas con mÃºltiples delegaciones que utilizan aplicaciones en la nube.' }
      ]
    },
    comunicaciones: {
      title: "Comunicaciones Unificadas: ColaboraciÃ³n sin Barreras",
      description: "Unifique sus herramientas de comunicaciÃ³n (voz, vÃ­deo, mensajerÃ­a) en una Ãºnica plataforma. Facilite la colaboraciÃ³n, mejore la atenciÃ³n al cliente y optimice sus costes.",
      services: [
                { id: 'centralita', name: 'Centralita Virtual', imageUrl: '/happy-customer-service-rep.png', need: 'Â¿Pierde llamadas de clientes importantes o su sistema actual es obsoleto?', solution: 'Un sistema de telefonÃ­a avanzado en la nube que proyecta una imagen profesional y asegura que nunca pierda una oportunidad de negocio, con funcionalidades avanzadas.', features: ['Operadora AutomÃ¡tica (IVR)', 'Grupos de llamada', 'BuzÃ³n de voz a email', 'EstadÃ­sticas y grabaciÃ³n'], ideal: 'Cualquier empresa que quiera modernizar su ...' },
        { id: 'trunk', name: 'Trunk SIP', imageUrl: '/home-office-remote-work.png', need: 'Â¿Su factura telefÃ³nica es demasiado alta pero quiere mantener su centralita?', solution: 'Conecte su centralita actual a la red telefÃ³nica a travÃ©s de internet y reduzca drÃ¡sticamente sus costes con planes de llamadas ilimitadas.', features: ['Ahorro en la factura', 'Llamadas ilimitadas', 'NumeraciÃ³n nacional/internacional', 'Certificado con principales fabricantes'], ideal: 'Empresas con una centralita fÃ­sica que bus...' },
        { id: 'teams', name: 'TelefonÃ­a en M. Teams', imageUrl: '/modern-office-collaboration.png', need: 'Â¿Su equipo ya trabaja en Teams y quiere simplificar herramientas?', solution: 'Convierta Teams en su Ãºnica herramienta de comunicaciÃ³n. Realice y reciba llamadas a fijos y mÃ³viles desde la misma interfaz que ya utiliza a diario.', features: ['Unifica comunicaciones', 'Simplifica la gestiÃ³n', 'Aprovecha herramienta conocida', 'Movilidad total'], ideal: 'Empresas que han adoptado Microsoft Teams como su principal herram...' },
        { id: 'movil', name: 'TelefonÃ­a MÃ³vil', imageUrl: '/sim-cards-2500-1200.jpg', need: 'Â¿Necesita planes mÃ³viles para empresa flexibles y con servicios de valor?', solution: 'Ofrecemos una completa gama de tarifas mÃ³viles con cobertura 5G y servicios de valor aÃ±adido pensados para el profesional.', features: ['Cobertura 5G', 'Hasta 250GB de datos', 'Roaming en Europa', 'MultiSIM, eSIM, IP Fija'], ideal: 'Equipos que necesitan conectividad mÃ³vil fiable y flexible para su trabajo diario.' },
        { id: 'trunk', name: 'Trunk SIP', imageUrl: '/placeholder.jpg', need: 'Â¿Su factura telefÃ³nica es demasiado alta pero quiere mantener su centralita?', solution: 'Conecte su centralita actual a la red telefÃ³nica a travÃ©s de internet y reduzca drÃ¡sticamente sus costes con planes de llamadas ilimitadas.', features: ['Ahorro en la factura', 'Llamadas ilimitadas', 'NumeraciÃ³n nacional/internacional', 'Certificado with principales fabricantes'], ideal: 'Empresas con una centralita fÃ­sica que buscan optimizar sus costes de comunicaciÃ³n.' },
        { id: 'teams', name: 'TelefonÃ­a en M. Teams', imageUrl: '/placeholder.jpg', need: 'Â¿Su equipo ya trabaja en Teams y quiere simplificar herramientas?', solution: 'Convierta Teams en su Ãºnica herramienta de comunicaciÃ³n. Realice y reciba llamadas a fijos y mÃ³viles desde la misma interfaz que ya utiliza a diario.', features: ['Unifica comunicaciones', 'Simplifica la gestiÃ³n', 'Aprovecha herramienta conocida', 'Movilidad total'], ideal: 'Empresas que han adoptado Microsoft Teams como su principal herramienta de colaboraciÃ³n.' },
        { id: 'movil', name: 'TelefonÃ­a MÃ³vil', imageUrl: '/placeholder.jpg', need: 'Â¿Necesita planes mÃ³viles para empresa flexibles y con servicios de valor?', solution: 'Ofrecemos una completa gama de tarifas mÃ³viles con cobertura 5G y servicios de valor aÃ±adido pensados para el profesional.', features: ['Cobertura 5G', 'Hasta 250GB de datos', 'Roaming en Europa', 'MultiSIM, eSIM, IP Fija'], ideal: 'Equipos que necesitan conectividad mÃ³vil fiable y flexible para su trabajo diario.' }
      ]
    },
    cloud: {
      title: "Cloud y Data Center: Su Infraestructura, a su Manera",
      description: "Potencia, flexibilidad y seguridad para alojar sus aplicaciones y datos. Le ofrecemos desde mÃ¡quinas virtuales hasta el alojamiento fÃ­sico de sus servidores en Data Centers de Ãºltima generaciÃ³n.",
      services: [
                { id: 'vm', name: 'Cloud VM', imageUrl: '/placeholder.jpg', need: 'Â¿Necesita servidores pero quiere evitar la inversiÃ³n y mantenimiento de hardware?', solution: 'Despliegue servidores virtuales en la nube en minutos. Pague solo por los recursos que utiliza y olvÃ­dese de la gestiÃ³n del hardware fÃ­sico.', features: ['Alta disponibilidad', 'Backups automÃ¡ticos', 'ConfiguraciÃ³n a medida', 'FacturaciÃ³n por consumo real'], ideal: 'Aplicaciones de negocio, servidores web, bases de datos y e...' },
        { id: 'colocation', name: 'Alojamiento y Colocation', imageUrl: '/placeholder.jpg', need: 'Â¿Tiene servidores propios y necesita un entorno profesional que garantice su funcionamiento 24/7?', solution: 'Aloje sus equipos en nuestros Data Centers con la mÃ¡xima seguridad fÃ­sica, ambiental y conectividad redundante.', features: ['MÃºltiples ubicaciones', 'Sistemas N+1', 'Seguridad 24/7', 'Neutralidad de operadores'], ideal: 'Empresas que prefieren mantener su propio hardware en un entorno profesional y seguro.' },
        { id: 'privado', name: 'Cloud Privado e HÃ­brido', imageUrl: '/placeholder.jpg', need: 'Â¿Requiere un entorno cloud exclusivo o combinar lo mejor de nubes pÃºblicas y privadas?', solution: 'DiseÃ±amos soluciones de nube a medida para entornos de misiÃ³n crÃ­tica, combinando la seguridad de un entorno privado con la flexibilidad de la nube pÃºblica.', features: ['Infraestructura dedicada', 'Alto rendimiento', 'IntegraciÃ³n con nube pÃºblica', 'MÃ¡xima flexibilidad'], ideal: 'Cargas de trabajo con requisitos especÃ­f...' },
        { id: 'colocation', name: 'Alojamiento y Colocation', imageUrl: '/placeholder.jpg', need: 'Â¿Tiene servidores propios y necesita un entorno profesional que garantice su funcionamiento 24/7?', solution: 'Aloje sus equipos en nuestros Data Centers con la mÃ¡xima seguridad fÃ­sica, ambiental y conectividad redundante.', features: ['MÃºltiples ubicaciones', 'Sistemas N+1', 'Seguridad 24/7', 'Neutralidad de operadores'], ideal: 'Empresas que prefieren mantener su propio hardware en un entorno profesional y seguro.' },
        { id: 'privado', name: 'Cloud Privado e HÃ­brido', imageUrl: '/placeholder.jpg', need: 'Â¿Requiere un entorno cloud exclusivo o combinar lo mejor de nubes pÃºblicas y privadas?', solution: 'DiseÃ±amos soluciones de nube a medida para entornos de misiÃ³n crÃ­tica, combinando la seguridad de un entorno privado con la flexibilidad de la nube pÃºblica.', features: ['Infraestructura dedicada', 'Alto rendimiento', 'IntegraciÃ³n con nube pÃºblica', 'MÃ¡xima flexibilidad'], ideal: 'Cargas de trabajo con requisitos especÃ­ficos de rendimiento, seguridad o cumplimiento normativo.' }
      ]
    },
    seguridad: {
      title: "Seguridad Gestionada: ProtecciÃ³n Integral para su Tranquilidad",
      description: "Proteja sus activos mÃ¡s valiosos con nuestras soluciones de seguridad gestionada. Desde la defensa perimetral hasta la monitorizaciÃ³n 24/7, nos encargamos de su ciberseguridad para que usted no tenga que hacerlo.",
      services: [
        { id: 'firewall', name: 'Cloud Firewall Gestionado', imageUrl: '/abstract-cybersecurity-concept-design-1.jpg', need: 'Â¿EstÃ¡ su empresa realmente protegida contra ciberataques y pÃ©rdida de datos?', solution: 'Implementamos su primera lÃ­nea de defensa. Una soluciÃ³n de seguridad perimetral en la nube basada en tecnologÃ­a Fortinet, gestionada por expertos.', features: ['Firewall de Ãºltima generaciÃ³n', 'Antivirus de red e IPS', 'Filtrado web y de aplicaciones', 'Acceso remoto seguro (VPN)'], ideal: 'Toda empresa que desee proteger su red de amenazas externas de forma proactiva.' },
        { id: 'backup', name: 'Backup y SOC', imageUrl: '/protected-page.jpg', need: 'Â¿Su negocio sobrevivirÃ­a a un ciberataque o a una pÃ©rdida total de datos?', solution: 'Garantizamos la continuidad de su negocio con copias de seguridad automatizadas y un Centro de Operaciones de Seguridad (SOC) que monitoriza y responde a amenazas 24/7.', features: ['Backup como Servicio (BaaS)', 'MonitorizaciÃ³n de amenazas 24/7', 'AnÃ¡lisis y respuesta a incidentes', 'RecuperaciÃ³n ante desastres'], ideal: 'Empresas que consideran sus datos un activo crÃ­tico y buscan la mÃ¡xima protecciÃ³n y resiliencia.' }
      ]
    }
  };

  // Estado para gestionar los servicios activos
  const [activeServices, setActiveServices] = useState<Record<string, string>>({
    conectividad: 'ftto',
    comunicaciones: 'centralita',
    cloud: 'vm',
    seguridad: 'firewall'
  });

  // FunciÃ³n para cambiar el servicio activo
  const handleServiceChange = (category: string, serviceId: string) => {
    setActiveServices(prev => ({
      ...prev,
      [category]: serviceId
    }));
  };

  // FunciÃ³n para obtener el servicio activo por categorÃ­a
  const getActiveService = (category: string) => {
    const serviceId = activeServices[category];
    return servicesData[category as keyof typeof servicesData].services.find(s => s.id === serviceId);
  };

  // Cargar FAQs y Hero desde la API
  useEffect(() => {
    const fetchData = async () => {
      try {
        setLoading(true);
        
        // Cargar FAQs
        const faqResponse = await fetch('/api/admin/faq-items?page=empresa');
        if (faqResponse.ok) {
          const faqData = await faqResponse.json();
          setFaqs(faqData.filter((faq: any) => faq.isActive));
        }

        // Cargar configuraciÃ³n del hero
        const heroRes = await fetch('/api/admin/hero-config?page=empresa');
        if (heroRes.ok) {
          const data = await heroRes.json();
          const activeHero = Array.isArray(data)
            ? data.find((c: any) => c.isActive)
            : (data.isActive ? data : null);
          
          if (activeHero) {
            const parsedConfig = {
              ...activeHero,
              highlights: activeHero.highlights ? (
                typeof activeHero.highlights === 'string' 
                  ? JSON.parse(activeHero.highlights)
                  : activeHero.highlights
              ) : [],
              primaryCta: typeof activeHero.primaryCta === 'string' 
                ? JSON.parse(activeHero.primaryCta) 
                : activeHero.primaryCta,
              secondaryCta: typeof activeHero.secondaryCta === 'string' 
                ? JSON.parse(activeHero.secondaryCta) 
                : activeHero.secondaryCta,
            };
            setHeroConfig(parsedConfig);
          }
        }

        setLoading(false);
      } catch (err) {
        console.error('Error loading data:', err);
        setError('Error al cargar los datos');
        setLoading(false);
      }
    };

    fetchData();
  }, []);

  if (error) {
    return (
      <div className="container mx-auto px-4 py-12">
        <div className="text-center text-red-600">
          <p>Error al cargar la pÃ¡gina: {error}</p>
        </div>
      </div>
    );
  }

  return (
    <div className="relative min-h-screen">
      {/* Hero Section sin contenedor para que ocupe todo el ancho */}
      {heroConfig ? (
        <HeroProfesional {...heroConfig} />
      ) : (
        <div className="h-96 bg-gradient-to-r from-green-900 to-green-600 flex items-center justify-center">
          <p className="text-white text-xl">Cargando hero...</p>
        </div>
      )}
      
      {/* Contenido con el contenedor para el resto de secciones */}
      <div className="container mx-auto px-6">
        <div className="text-center mt-8">
          <a 
            href="#cta-final" 
            className="cta-button inline-block bg-green-600 text-white font-bold px-8 py-4 rounded-lg text-lg shadow-lg transition-all duration-200 hover:translate-y-[-2px] hover:shadow-lg"
          >
            Descubra cÃ³mo podemos ayudarle
          </a>
        </div>

        {/* Por quÃ© confiar en Prisma */}
        <section id="porque-prisma" className="py-20">
          <div className="text-center mb-12">
            <h2 className="text-3xl md:text-4xl font-bold mb-3">Â¿Por QuÃ© Confiar en Prisma?</h2>
            <p className="text-stone-600 max-w-3xl mx-auto">
              Entendemos los desafÃ­os de los empresarios. Por eso, hemos construido nuestro servicio sobre tres pilares fundamentales:
            </p>
          </div>
          <div className="grid grid-cols-1 md:grid-cols-3 gap-8 max-w-6xl mx-auto mb-16">
            <div className="bg-white p-8 rounded-xl shadow-lg border border-stone-200/50 text-center">
              <h3 className="font-bold text-xl mb-3">âœ“ Un Ãšnico Interlocutor</h3>
              <p className="text-stone-600">
                OlvÃ­dese de gestionar mÃºltiples proveedores. Centralizamos toda su tecnologÃ­a para darle una soluciÃ³n Ãºnica y coherente, ahorrÃ¡ndole tiempo y problemas.
              </p>
            </div>
            <div className="bg-white p-8 rounded-xl shadow-lg border border-stone-200/50 text-center">
              <h3 className="font-bold text-xl mb-3">âœ“ Soluciones de Ã‰lite</h3>
              <p className="text-stone-600">
                No experimentamos con su negocio. Integramos solo las mejores soluciones del mercado, probadas y respaldadas por los lÃ­deres de la industria.
              </p>
            </div>
            <div className="bg-white p-8 rounded-xl shadow-lg border border-stone-200/50 text-center">
              <h3 className="font-bold text-xl mb-3">âœ“ Asesoramiento EstratÃ©gico</h3>
              <p className="text-stone-600">
                No somos simples vendedores. Somos sus asesores. Entendemos sus objetivos y le guiamos para implementar la tecnologÃ­a que realmente impulsarÃ¡ su crecimiento.
              </p>
            </div>
          </div>
          <div className="text-center">
            <h4 className="text-lg font-semibold text-stone-500 mb-6">Nuestros Partners TecnolÃ³gicos de Confianza</h4>
            <div className="flex flex-wrap justify-center items-center gap-x-12 gap-y-4 grayscale opacity-70">
              <Image src="/logo-3cx.png" alt="3CX" width={100} height={40} />
              <Image src="/logo-cisco.png" alt="Cisco" width={100} height={40} />
              <Image src="/logo-fortinet.png" alt="Fortinet" width={100} height={40} />
              <Image src="/logo-starlink.png" alt="Starlink" width={100} height={40} />
              <Image src="/logo-microsoft.png" alt="Microsoft" width={100} height={40} />
            </div>
          </div>
        </section>

        {/* Secciones de Servicios */}
        {Object.entries(servicesData).map(([categoryKey, categoryData]) => (
          <section 
            id={categoryKey} 
            key={categoryKey} 
            className="pt-20 -mt-20 mb-20 scroll-mt-24"
          >
            <div className="text-center mb-12">
              <h2 className="text-3xl md:text-4xl font-bold mb-3">{categoryData.title}</h2>
              <p className="text-stone-600 max-w-2xl mx-auto">{categoryData.description}</p>
            </div>
            
            <div className="flex flex-wrap justify-center gap-2 mb-8 border-b border-stone-200 pb-4">
              {categoryData.services.map((service) => {
                const isActive = activeServices[categoryKey] === service.id;
                return (
                  <ServiceButton
                    key={service.id}
                    isActive={isActive}
                    category={categoryKey}
                    serviceId={service.id}
                    name={service.name}
                    onClick={handleServiceChange}
                  />
                );
              })}
            </div>
            
            <div className="bg-white p-8 rounded-2xl shadow-lg border border-stone-200/60 min-h-[400px]">
              <ServiceContent service={getActiveService(categoryKey)} ctaId="cta-final" />
            </div>
            
            {categoryKey === 'comunicaciones' && (
              <ComparationChart />
            )}
          </section>
        ))}

        {/* Testimonios */}
        <section id="testimonios" className="py-20 bg-white -mx-6 px-6 rounded-2xl shadow-inner border">
          <div className="text-center mb-12">
            <h2 className="text-3xl md:text-4xl font-bold mb-3">Empresas que ya ConfÃ­an en Nosotros</h2>
            <p className="text-stone-600 max-w-2xl mx-auto">La tranquilidad de nuestros clientes es nuestro mayor logro.</p>
          </div>
          <div className="grid grid-cols-1 md:grid-cols-2 gap-8 max-w-5xl mx-auto">
            <div className="bg-stone-50 p-8 rounded-xl border border-stone-200">
              <p className="text-stone-600 italic mb-4">"Desde que trabajamos con Prisma, nuestra infraestructura de comunicaciones es mÃ¡s robusta que nunca. El cambio a la centralita virtual fue transparente y el soporte es excepcional."</p>
              <p className="font-bold text-right">- CEO, Empresa de LogÃ­stica</p>
            </div>
            <div className="bg-stone-50 p-8 rounded-xl border border-stone-200">
              <p className="text-stone-600 italic mb-4">"La seguridad de nuestra red era una preocupaciÃ³n constante. El equipo de Prisma implementÃ³ un firewall gestionado y ahora tenemos la tranquilidad que necesitÃ¡bamos para crecer."</p>
              <p className="font-bold text-right">- Director de IT, Consultora Financiera</p>
            </div>
          </div>
        </section>

        {/* FAQ Section - Manteniendo compatibilidad con el sistema existente */}
        {faqs.length > 0 && (
          <section id="preguntas-frecuentes" className="py-16 bg-white -mx-6 px-6 my-10 rounded-2xl shadow-lg border border-stone-100">
            <div className="text-center mb-12">
              <h2 className="text-3xl font-bold text-gray-900 mb-4">
                Preguntas Frecuentes
              </h2>
              <p className="text-lg text-gray-600 max-w-3xl mx-auto">
                Resolvemos todas sus dudas sobre nuestros servicios empresariales.
              </p>
            </div>
            <div className="max-w-4xl mx-auto">
              <FAQAccordionSafe items={faqs} />
            </div>
          </section>
        )}

        {/* CTA Final */}
        <section id="cta-final" className="bg-green-600 text-white text-center py-20 my-20 rounded-2xl shadow-2xl -mx-6 px-6 scroll-mt-24">
          <h2 className="text-3xl md:text-4xl font-bold mb-4">DÃ© el Siguiente Paso Hacia su Tranquilidad TecnolÃ³gica</h2>
          <p className="max-w-2xl mx-auto mb-8 text-green-100">
            PermÃ­tanos analizar su situaciÃ³n actual y proponerle un plan de mejora sin compromiso. Descubra los puntos dÃ©biles de su infraestructura y cÃ³mo podemos fortalecerlos.
          </p>
          <a 
            href="mailto:contacto@prisma.com?subject=Solicitud de AuditorÃ­a Gratuita" 
            className="cta-button inline-block bg-white text-green-700 font-bold px-10 py-4 rounded-lg text-lg shadow-lg transition-all duration-200 hover:translate-y-[-2px] hover:shadow-lg"
          >
            Agendar una AuditorÃ­a Gratuita
          </a>
        </section>
      </div>
    </div>
  );
}
